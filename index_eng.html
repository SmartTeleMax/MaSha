<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>MASHA is a JavaScript utility allowing you to mark interesting parts of web page content and share it.</title>
 
    <!--[IF IE]> <script type="text/javascript" src="js/masha/js/ierange.js"></script> <![ENDIF]-->
    <link href="js/masha/css/masha.css" rel="stylesheet" />
    <link href="css/jquery.jtweetsanywhere-1.2.1.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <link href='js/sh/styles/shCore.css' rel='stylesheet' type='text/css' />
    <link href='js/sh/styles/shThemeDefault.css' rel='stylesheet' type='text/css' />
</head>
<body>
	<div id="upmsg-selectable" class="">
		        <div class="upmsg-selectable-inner">
		            <img alt="" src="js/masha/img/textselect/upmsg_arrow.png">
		            <p>You can mark interesting parts of the page content and share unique link from browser address bar.</p>
		            <a class="upmsg_closebtn" href="#"></a>
		        </div>
		    </div>
    <div id="wraper">
        <div class="leftbar">
            <a class="lang_eng" href="/">РУС</a>
            <div class="menu">
                <ul>
                    <li><a href="#masha">MASHA</a></li>
                    <li><a href="#usage">USAGE</a></li>
                    <li><a href="#plugins">PLUGINS</a></li>
                    <li><a href="#development">DEVELOPMENT</a></li>
                    <li><a href="#authors">AUTHORS</a></li>
                    <li><a href="#license">LICENSE</a></li>
                    <li><a href="#download" style="border: 1px solid #ffe600;">DOWNLOAD</a></li>
                </ul>
            </div>
            
            <div id="tweets">
                <a href="http://twitter.com/#!/search/%23mashajs">#MASHAJS</a>
            </div>
        </div>
        <div class="content" id="selectable-content">
			<div id="logo">
				<!--h1 class="name"><span class="marked">MA</span>SHA</h1>
				<span class="m">MARK!</span> <span class="s">SHARE!</span-->
				
				<img src="img/logoyellow_eng.png" alt=""/>
				<a href="http://eng.kremlin.ru/news/488#sel=5:1,5:10">http://eng.kremlin.ru/news/488#sel=5:1,5:10</a>
				
				<!--h2 class="mark">– MARK!</h2><h2 class="share">– SHARE!</h2-->
				
			</div>
            
            <div class="section" id="masha">
                <h1>MASHA</h1>
                
                <p>MASHA (short for Mark &amp; Share) is a JavaScript utility allowing you to mark interesting parts of web page content and share it. Just select text (paragraphs, sentences, words) on MASHA powered page and copy generated URL from location bar. Opening of that url will open the page with same content and restored marks. Try it on this page!</p>

                <p>This feature was developed for official site of President of Russia. After some months of active use it was published under MIT license.</p>
                
            </div>
            <div class="section" id="projects">
                <h1>MASHA-powered sites</h1>
                <div class="slider">
                    <div class="item">
                        <img src="img/gerb.png" alt="kremlin.ru" />
                        <a href="http://eng.kremlin.ru/">The official site of the President of Russia</a>
                    </div>
                    <div class="item">
                        <img src="img/ntv_logo.png" alt="TV company “NTV”" style="    margin-bottom: 45px;margin-right: 5px;" />
                        <a href="http://www.ntv.ru/novosti/234463/#sel=2:18,2:28">The site of TV-channel “NTV”</a>
                    </div>
					<div class="item">
                        <img src="img/404fest_logo.png" alt="Web developers festival 404" style="    margin-bottom: 45px;margin-right: 5px;" />
                        <a href="http://2011.404fest.ru/themes/masha/#sel=4:21,4:28">Web developers festival "404"</a>
                    </div>

                    <div class="item youproject">
                        <div>
                            <h2 style="left: 0;top: 6px;">YOU?</h2>
                        </div>
                        <a style="top: 8px; left: 34px;" href="mailto: mashajs@gmail.com">Please contact us</a>
                    </div>
                    <div style="clear:both;"></div>
                </div>
                
            </div>
            <div class="section" id="usage">
                <h1>USAGE</h1>
                <p>MASHA has been written in clean JavaScript and does not have any framework dependencies (except bundled ierange library that included to support Internet Explorer browser).</p>
                <p>To enable MASHA on your page you need to add inside &lt;head&gt;&lt;/head&gt; tag that code:</p>
                
                <div class="code">
                    
                    <pre class="brush: js; html-script: true">
                        &lt;!--[IF IE]> 
                            &lt;script type="text/javascript" src="ierange.js">&lt;/script> 
                        &lt;![ENDIF]-->
                        &lt;script type="text/javascript" src="masha.js">&lt;/script>
                        &lt;link rel="stylesheet" type="text/css" href="masha.css">
                        &lt;script type="text/javascript">
                        // if jQuery is not available
                        if(window.addEventListener){     
                            window.addEventListener('load', function(){
                                // can be called by domready
                                MaSha.instance = new MaSha();
                            }, false);
                        } else {
                            window.attachEvent('onload', function(){
                                // can be called by domready
                                MaSha.instance = new MaSha();
                            });
                        }
                        // if jQuery available:
                        $(document).ready(function() {
                            MaSha.instance = new MaSha();
                        });
                        &lt;/script>
                    </pre>
                </div>


                <p>MASHA uses three elements on the page:</p>
                    <ol>
                        <li>Element that contains selectable text (see also <em>selectable</em> option below), <strong>required</strong>.</li>
                        <li>Button that floats over selected text that acts as selection url getter (see also <em>marker</em> option).</li>
                        <li>Popup that floats when a text is selected and tells user that he can now share a link (see also <em>selectMessage</em> option).</li>
                	</ol>
                <p>All options are defined by default, but you can override any of them on Masha object instance creation.</p>
                <div class="code">
            
                    <pre class="brush: js">
                        new MaSha({  option: 'value' }) 
                    </pre>
            
                </div>
                <p>The default setting are:</p>
                <div class="code">
                    
                    <pre class="brush: js">
                        {
                          'regexp': '[^\\s,;:–.!?<>…\\n\xA0\\*]+',
                          'selectable': 'selectable-content',
                          'marker': 'txtselect_marker',
                          'ignored': null,
                          'selectMessage': null,
                          'location': new LocationHandler(),
                          'validate': false,
                          'onMark': null,
                          'onUnmark': null,
                          'onHashRead': function(){ … }
                        }
                    </pre>
                    
                </div>
                <p>where</p>

                <ul class="text nomargins">
                    <li><strong>'regexp'</strong> — regular expression that describes word (not compiled, as string).</li>
                    <li><strong>'selectable'</strong> — HTMLElement or its id, that contains selectable text.</li>
                    <li><strong>'marker'</strong> — HTMLElement or its id, that contains marker icon to be displayed on text selection. If element with given id is not found, an &lt;a/&gt; element is created.</li>
                    <li><strong>'selectMessage'</strong> — HTMLElement or its id with popup that floats when text is selected. If closed once, popup will be never displayed again in this browser (localStorage or cookies are used). If no value provided, the popup is not shown.</li>
                    <li><strong>'ignored'</strong> — Either function or string.

                    <ul>
                        <li>Filter function, that allows to ignore specified HTMLElement as selection target. Should return true if element must be ignored; otherwise false.</li>
                        <li>Comma-separated tag names, classes or ids of ignored elements. For example: <em>'ul, .ignored-cls, #ignored-id'</em>.</li>
                    </ul>
                    </li>
                    <li><strong>'location'</strong> — an object used for get url hash from and write it to. The only significant methods are getHash, setHash and addHashchange. You can redefine, for example, to write URL not in address bar but into a custom popup, or for handle address bar URL manually.</li>
                    <li><strong>'validate'</strong> — If true, the checksum of each selection is written in hash and they are validated on page load. Attention! There is no checksum algorithm provided by default and you should provide it to use validation! See 'Validation' section below.</li>
                    <li><strong>'enableHaschange'</strong> — If true, hashchange event is handled.</li>
                    <li><strong>'onMark'</strong> — Callback function that fired on text selection.</li>
                    <li><strong>'onUnmark'</strong> — Callback function that fired on text deselection.</li>
                    <li><strong>'onHashRead'</strong> — Function that called on loading of the page with selected fragments. Function that set by default will scroll page to the first selected fragment.</li>
                </ul>
        </div>
        <div class="section">
            <h1>Internet Explorer support</h1>
            <p>MASHA uses custom bundled variant of <a href="http://code.google.com/p/ierange/">ierange</a> script to support Internet Explorer.</p>

            <p>If you use mainstream ierange library instead of bundled one please add this line to end of root function:</p>
            <div class="code">
                <pre class="brush: js">
                    window.DOMRange = DOMRange;
                </pre>
            </div>
        </div>

        <div class="section">
            <h1>Validation</h1>

            <p>Some changes on the page (paragraph and words additions or deletions) may cause unwanted selection changes. To ensure that selection is not broken, use validation feature.</p>

            <p>To use validation you should implement <em>MaSha.prototype.getPositionChecksum</em> method. This method accepts word sequence iterator (a function returning the next word of sequence on each call or null if finished) and returns a string checksum. The <em>getPositionChecksum</em> method is called twice for each range: one for start position and one for end position (with reversed iterator).</p>

            <p>The checksum is included into hash and it is checked on page load. If calculated checksum doesn't one from url, the selection is not restored.</p>

            <p>Checksum algorythm is not included in MaSha by default, because we didn't invent The Best Algorythm Ever yet. And we don't want to force users to use bad (draft) algorythms, but you can use our algorythm.</p>

            <div class="code">
                <pre class="brush: js">
                    MaSha.prototype.getPositionChecksum = function(wordsIterator){
                        var word1 = wordsIterator();
                        var word2 = wordsIterator();
                        var sum = makeSomeCalculations(word1, word2);
                        return sum;
                    }
                </pre>
            </div>
        </div>

        <div class="section" id="validation">
            <h1>MaSha & forums</h1>

            <p>MaSha supports pages with multiple text blocks, including forum threads. In this case, for each text block own MaSha instance is created, and each text block has separate paragraph and text numeration. This behavior is implemented by <em>MultiMasha</em>, a constructor accepting two parameters:</p>
                <ul class="text nomargins">
                    <li><strong>'elements'</strong> — an array of html-elements corresponding text blocks;</li>
                    <li><strong>'getPrefix'</strong> — function accepting html-element from the array and returning it's identifier to be used in URL. Return element's <em>id</em> by default.</li>
                    <li><strong>'options'</strong> — options of MaSha object.</li>
                </ul>
            <p>Example of usage:</p>

            <div class="code">
                <pre class="brush: js">
                    var posts = document.querySelectorAll('.post-text');
                    new MultiMaSha(posts, function(element){
                        return element.id.split('-')[1];
                    });
                </pre>
            </div>
        </div>

        <div class="section" id="plugins">
            <h1>PLUGINS</h1>
            <div class="pluginlist">
                <a class="active" href="plugins/masha_wordpress.zip">
                    <img src="img/plugin_wordpress.png" alt="WORDPRESS"/>
                    <span>WORDPRESS</span>
                </a>
                <a href="#">
                    <img src="img/plugins_2.png" alt="DRUPAL"/>
                    <span>DRUPAL</span>
                </a>
                <a href="#">
                    <img src="img/plugins_blogger.png" alt="BLOGGER"/>
                    <span>BLOGGER</span>
                </a>
                <a href="#">
                    <img src="img/plugins_joomla.png" alt="JOOMLA" />
                    <span>JOOMLA</span>
                </a>
                <a href="#">
                    <img src="img/plugins_tumbler.png" alt="TUMBLER" />
                    <span>TUMBLER</span>
                </a>
            </div>
            <div style="clear:both;"></div>
        </div>
		<div class="section" id="development">
			<h1>DEVELOPMENT</h1>
            <a href="https://github.com/SmartTeleMax/MaSha"><img src="img/icon_github.png" style="margin-bottom: 15px;" alt="github"/></a>
			<p>Development of the project is <a href="https://github.com/SmartTeleMax/MaSha">hosted on github</a>. Use it to <a href="https://github.com/SmartTeleMax/MaSha/issues">submit bugs and feature requests</a> or <a href="http://help.github.com/fork-a-repo/">contribute by forking and submitting a pull request</a>.</p>
		</div>
        <div class="section" id="authors">
            <h1>AUTHORS</h1>
            <div class="authorslist">
                <div class="card geller">
                    <h3>Artem Geller</h3>
                    <span class="slinks"><a href="http://twitter.com/#!/darkboutique">@darkboutique</a>, <a href="http://www.facebook.com/artemgeller">facebook</a>, <a href="https://plus.google.com/107566059773067039127/">gplus</a>, <a href="http://gellera.moikrug.ru/">moikrug</a></span>
                </div>
                <div class="card sensey">
                    <h3>Denis Otkidach</h3>
                    <span class="slinks"><a href="http://twitter.com/#!/otkds">@otkds</a>, <a href="http://www.linkedin.com/in/otkds">LinkedIn</a> <!--a href="https://github.com/ods">github</a--></span>
                </div>
                <div style="clear:both;"></div>
                <div class="card iam">
                    <h3>Stas Bonbin</h3>
                    <span class="slinks"><a href="http://twitter.com/#!/iamn0s">@iamn0s</a>, <a href="http://www.facebook.com/sbonbin">facebook</a>, <a href="https://plus.google.com/118210746303172876703">gplus</a>, <a href="http://n0s.moikrug.ru/">moikrug</a></span>
                </div>
                <div class="card harut">
                    <h3>Harut Dagesyan</h3>
                    <span class="slinks"><a href="http://twitter.com/#!/harutune">@harutune</a>, <a href="http://dagesyan.moikrug.ru/">moikrug</a>, <a href="https://github.com/harut">github</a></span>
                </div>
                <div style="clear:both;"></div>
                <div class="card kiril">
                    <h3>Kirill Grishin</h3>
                    <span class="slinks"><a href="http://twitter.com/#!/shiberz">@shiberz</a>, <a href="http://grishinkirill.moikrug.ru/">moikrug</a>, <a href="https://plus.google.com/108494332862255363205/posts">gplus</a></span>
                </div>
                <div style="clear:both;"></div>
            </div>
            <p>This work was inspired by <a href="http://nytimes.com/">Emphasis</a> tool of New York Times. The goal was to make an utility that doesn’t require reading documentation to use.</p>
        </div>
        <div class="section" id="license">
            <h1>LICENSE</h1>
            <p>MASHA is released under the terms of MIT license, which means you can use, modify, redistribute it with almost no restrictions.</p>
        </div>
        
        <div class="section" id="download">
            <h1>DOWNLOAD</h1>
            <!--a href="#">
                <span class="blue">MASHA.JS</span> (35Kb)<br/>
                <span class="block">ver. 0.1</span>
                <span class="block">ierange</span>
            </a-->
            
            <a href="https://github.com/SmartTeleMax/MaSha/zipball/v0.3">
                <span class="blue">MASHA_ALL.ZIP</span> (91Kb)<br/>
                <span class="block">ver. 0.3</span>
                <span class="block">js + css + image</span>
            </a>

			<a href="id/Masha_Logo.zip">
                <span class="blue">MASHA_LOGO.ZIP</span> (315Kb)<br/>
                <span class="block">logo (eps, ai, psd)</span>
                <span class="block">© Mikhail Zhashkov</span>
            </a>

        </div>
        <div style="text-align: center; padding-top: 100px; padding-bottom: 100px;">
            <img src="img/krakozjabra.png" alt="" />
        </div>
        
        
    </div>
    <div style="clear:both;"></div>
		<div id="footer">
			<div class="inner">
	            <img src="img/footerlogo.png" alt="" />
	            <div class="btn">
					<img src="img/arrow.png" alt="" />
					<div style="float:right; margin-left: 20px;">
						<a href="http://twitter.com/share" data-text="MASHA is a JavaScript utility allowing you to mark interesting parts of web page content and share it #mashajs" class="twitter-share-button" data-count="none" data-related="iamn0s:Masha developer">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
						<g:plusone size="medium" count="false"></g:plusone>
						<div id="vk_like"></div>
						<div class="facebook_wrapper">
						<iframe src="http://www.facebook.com/plugins/like.php?app_id=247398771958833&amp;href=http%3A%2F%2Fmashajs.com%2F&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>
						</div>
					</div>
				</div>
			</div>
		</div>
		<a href="#" id="txtselect_marker"></a>
		<script type="text/javascript" src="js/packed.js?ver=0.1"></script>
		<script type="text/javascript">
			SyntaxHighlighter.defaults['toolbar'] = false;
	        SyntaxHighlighter.all()
	    </script>
	
		<!-- Yandex.Metrika counter --><div style="display:none;"><script type="text/javascript">(function(w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter8794819 = new Ya.Metrika({id:8794819, enableAll: true, trackHash:true}); } catch(e) { } }); })(window, "yandex_metrika_callbacks");</script></div><script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script><noscript><div><img src="//mc.yandex.ru/watch/8794819" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
		
		<script type="text/javascript" src="js/masha/js/message.js"></script>
		<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
		  {lang: 'en'}
		</script>
		<!-- Put this script tag to the <head> of your page -->
		<script type="text/javascript" src="http://userapi.com/js/api/openapi.js?34"></script>

		<script type="text/javascript">
		  VK.init({apiId: 2430782, onlyWidgets: true});
		</script>
		<script type="text/javascript">
		VK.Widgets.Like("vk_like", {type: "mini"});
		</script>


	</body>
</html>
